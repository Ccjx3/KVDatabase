# é˜¶æ®µ 2ï¼šåŒå±‚è·³è¡¨å®ç° ğŸš€

## å­¦ä¹ ç›®æ ‡
- ç†è§£è·³è¡¨çš„æ ¸å¿ƒæ€æƒ³ï¼šå¤šå±‚ç´¢å¼•
- å®ç°ä¸€ä¸ªç®€å•çš„åŒå±‚è·³è¡¨
- ä½“éªŒè·³è¡¨å¦‚ä½•åŠ é€ŸæŸ¥è¯¢

---

## 1. ä¸ºä»€ä¹ˆéœ€è¦è·³è¡¨ï¼Ÿ

### å•å±‚é“¾è¡¨çš„é—®é¢˜

åœ¨é˜¶æ®µ 1 ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†æœ‰åºé“¾è¡¨ã€‚ä½†æ˜¯æŸ¥æ‰¾æ•ˆç‡å¾ˆä½ï¼š

```
æŸ¥æ‰¾ key=7 åœ¨é“¾è¡¨ä¸­ï¼š
[1] -> [2] -> [3] -> [4] -> [5] -> [6] -> [7] -> NULL
 â†“      â†“      â†“      â†“      â†“      â†“      â†“
éœ€è¦æ¯”è¾ƒ 7 æ¬¡æ‰èƒ½æ‰¾åˆ°ï¼
```

**æ—¶é—´å¤æ‚åº¦**ï¼šO(n)

### è·³è¡¨çš„è§£å†³æ–¹æ¡ˆ

**æ ¸å¿ƒæ€æƒ³**ï¼šåœ¨åŸé“¾è¡¨ä¸Šæ–¹å»ºç«‹å¤šå±‚ç´¢å¼•ï¼Œåƒ"è·³æ¿"ä¸€æ ·åŠ é€ŸæŸ¥æ‰¾ã€‚

```
ç¬¬1å±‚ï¼ˆç´¢å¼•å±‚ï¼‰ï¼š[1] ---------> [5] ---------> [9] -> NULL
                   |             |             |
ç¬¬0å±‚ï¼ˆæ•°æ®å±‚ï¼‰ï¼š[1]->[2]->[3]->[5]->[6]->[7]->[9] -> NULL

æŸ¥æ‰¾ key=7ï¼š
1. ä»ç¬¬1å±‚å¼€å§‹ï¼š1 -> 5 (5<7ï¼Œç»§ç»­) -> 9 (9>7ï¼Œä¸‹é™åˆ°ç¬¬0å±‚)
2. åœ¨ç¬¬0å±‚ï¼š5 -> 6 -> 7 (æ‰¾åˆ°ï¼)
åªéœ€è¦æ¯”è¾ƒ 5 æ¬¡ï¼Œè€Œä¸æ˜¯ 7 æ¬¡ï¼
```

---

## 2. åŒå±‚è·³è¡¨ç»“æ„è®¾è®¡

### èŠ‚ç‚¹ç»“æ„

æ¯ä¸ªèŠ‚ç‚¹éœ€è¦ä¸¤ä¸ªæŒ‡é’ˆï¼š
- `next`ï¼šæŒ‡å‘åŒå±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
- `down`ï¼šæŒ‡å‘ä¸‹ä¸€å±‚çš„å¯¹åº”èŠ‚ç‚¹

```cpp
template<typename K, typename V>
class Node {
public:
    K key;
    V value;
    Node* next;    // åŒå±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
    Node* down;    // ä¸‹ä¸€å±‚çš„å¯¹åº”èŠ‚ç‚¹
    
    Node(K k, V v) : key(k), value(v), next(nullptr), down(nullptr) {}
};
```

### è·³è¡¨ç±»ç»“æ„

```cpp
template<typename K, typename V>
class TwoLevelSkipList {
private:
    Node<K, V>* level1_head;  // ç¬¬1å±‚ï¼ˆç´¢å¼•å±‚ï¼‰å¤´èŠ‚ç‚¹
    Node<K, V>* level0_head;  // ç¬¬0å±‚ï¼ˆæ•°æ®å±‚ï¼‰å¤´èŠ‚ç‚¹
    int element_count;
    
public:
    TwoLevelSkipList();
    ~TwoLevelSkipList();
    
    void insert(K key, V value);
    bool search(K key);
    void display();
    int size();
};
```

---

## 3. æ ¸å¿ƒæ“ä½œå®ç°

### 3.1 æ’å…¥æ“ä½œ

**ç­–ç•¥**ï¼š
1. å…ˆåœ¨ç¬¬0å±‚ï¼ˆæ•°æ®å±‚ï¼‰æ’å…¥èŠ‚ç‚¹
2. ä»¥ 50% çš„æ¦‚ç‡å°†èŠ‚ç‚¹æå‡åˆ°ç¬¬1å±‚ï¼ˆç´¢å¼•å±‚ï¼‰

**å›¾è§£**ï¼š

```
æ’å…¥ key=6 åˆ°åŒå±‚è·³è¡¨ï¼š

åˆå§‹çŠ¶æ€ï¼š
Level 1: [1] ---------> [5] ---------> [9] -> NULL
          |             |             |
Level 0: [1]->[2]->[3]->[5]->[7]->[8]->[9] -> NULL

æ­¥éª¤1ï¼šåœ¨ Level 0 æ’å…¥ 6
Level 0: [1]->[2]->[3]->[5]->[6]->[7]->[8]->[9] -> NULL

æ­¥éª¤2ï¼šæŠ›ç¡¬å¸å†³å®šæ˜¯å¦æå‡åˆ° Level 1ï¼ˆå‡è®¾æ˜¯ï¼‰
Level 1: [1] ---------> [5] -> [6] -> [9] -> NULL
          |             |      |     |
Level 0: [1]->[2]->[3]->[5]->[6]->[7]->[8]->[9] -> NULL
```

**ä»£ç å®ç°**ï¼š

```cpp
void insert(K key, V value) {
    cout << "\n--- æ’å…¥ key=" << key << " ---" << endl;
    
    // æ­¥éª¤1ï¼šåœ¨ Level 0 æ’å…¥
    Node<K, V>* newNode0 = new Node<K, V>(key, value);
    
    if (level0_head == nullptr || level0_head->key >= key) {
        if (level0_head != nullptr && level0_head->key == key) {
            cout << "key=" << key << " å·²å­˜åœ¨" << endl;
            delete newNode0;
            return;
        }
        newNode0->next = level0_head;
        level0_head = newNode0;
    } else {
        Node<K, V>* current = level0_head;
        while (current->next != nullptr && current->next->key < key) {
            current = current->next;
        }
        
        if (current->next != nullptr && current->next->key == key) {
            cout << "key=" << key << " å·²å­˜åœ¨" << endl;
            delete newNode0;
            return;
        }
        
        newNode0->next = current->next;
        current->next = newNode0;
    }
    
    element_count++;
    cout << "âœ“ åœ¨ Level 0 æ’å…¥æˆåŠŸ" << endl;
    
    // æ­¥éª¤2ï¼šä»¥ 50% æ¦‚ç‡æå‡åˆ° Level 1
    if (rand() % 2 == 0) {
        cout << "â†’ æå‡åˆ° Level 1" << endl;
        Node<K, V>* newNode1 = new Node<K, V>(key, value);
        newNode1->down = newNode0;  // è¿æ¥åˆ°ä¸‹å±‚èŠ‚ç‚¹
        
        if (level1_head == nullptr || level1_head->key >= key) {
            newNode1->next = level1_head;
            level1_head = newNode1;
        } else {
            Node<K, V>* current = level1_head;
            while (current->next != nullptr && current->next->key < key) {
                current = current->next;
            }
            newNode1->next = current->next;
            current->next = newNode1;
        }
    } else {
        cout << "â†’ ä¸æå‡åˆ° Level 1" << endl;
    }
}
```

### 3.2 æŸ¥æ‰¾æ“ä½œ

**ç­–ç•¥**ï¼š
1. ä»æœ€é«˜å±‚ï¼ˆLevel 1ï¼‰å¼€å§‹æŸ¥æ‰¾
2. åœ¨å½“å‰å±‚å‘å³ç§»åŠ¨ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ key å¤§äºç›®æ ‡ key
3. ä¸‹é™åˆ°ä¸‹ä¸€å±‚ï¼Œé‡å¤æ­¥éª¤ 2
4. åœ¨æœ€åº•å±‚æ‰¾åˆ°ç›®æ ‡æˆ–ç¡®è®¤ä¸å­˜åœ¨

**å›¾è§£**ï¼š

```
æŸ¥æ‰¾ key=7ï¼š

Level 1: [1] ---------> [5] ---------> [9] -> NULL
          â†“             â†“(5<7<9,ä¸‹é™)
Level 0: [1]->[2]->[3]->[5]->[6]->[7]->[8]->[9] -> NULL
                         â†“      â†“      â†“
                       æ¯”è¾ƒ3æ¬¡æ‰¾åˆ°ï¼

å¦‚æœæ²¡æœ‰ Level 1ï¼Œéœ€è¦æ¯”è¾ƒ 7 æ¬¡ï¼
```

**ä»£ç å®ç°**ï¼š

```cpp
bool search(K key) {
    cout << "\n--- æŸ¥æ‰¾ key=" << key << " ---" << endl;
    int comparisons = 0;
    
    // æ­¥éª¤1ï¼šä» Level 1 å¼€å§‹
    Node<K, V>* current = level1_head;
    
    if (current != nullptr) {
        cout << "ä» Level 1 å¼€å§‹æŸ¥æ‰¾..." << endl;
        
        // åœ¨ Level 1 å‘å³ç§»åŠ¨
        while (current != nullptr && current->key < key) {
            comparisons++;
            if (current->next == nullptr || current->next->key > key) {
                // ä¸‹é™åˆ° Level 0
                cout << "ä» Level 1 ä¸‹é™åˆ° Level 0ï¼Œä½ç½®åœ¨ key=" << current->key << " ä¹‹å" << endl;
                current = current->down;
                if (current != nullptr) {
                    current = current->next;
                }
                break;
            }
            current = current->next;
        }
        
        // æ£€æŸ¥æ˜¯å¦åœ¨ Level 1 å°±æ‰¾åˆ°äº†
        if (current != nullptr && current->key == key) {
            comparisons++;
            cout << "âœ“ åœ¨ Level 1 æ‰¾åˆ° key=" << key << ", value=" << current->value << endl;
            cout << "æ€»æ¯”è¾ƒæ¬¡æ•°: " << comparisons << endl;
            return true;
        }
    } else {
        // Level 1 ä¸ºç©ºï¼Œç›´æ¥ä» Level 0 å¼€å§‹
        cout << "Level 1 ä¸ºç©ºï¼Œä» Level 0 å¼€å§‹æŸ¥æ‰¾..." << endl;
        current = level0_head;
    }
    
    // æ­¥éª¤2ï¼šåœ¨ Level 0 æŸ¥æ‰¾
    while (current != nullptr) {
        comparisons++;
        if (current->key == key) {
            cout << "âœ“ åœ¨ Level 0 æ‰¾åˆ° key=" << key << ", value=" << current->value << endl;
            cout << "æ€»æ¯”è¾ƒæ¬¡æ•°: " << comparisons << endl;
            return true;
        }
        if (current->key > key) {
            break;
        }
        current = current->next;
    }
    
    cout << "âœ— æœªæ‰¾åˆ° key=" << key << endl;
    cout << "æ€»æ¯”è¾ƒæ¬¡æ•°: " << comparisons << endl;
    return false;
}
```

### 3.3 æ˜¾ç¤ºæ“ä½œ

```cpp
void display() {
    cout << "\n========== åŒå±‚è·³è¡¨ç»“æ„ ==========" << endl;
    
    // æ˜¾ç¤º Level 1
    cout << "Level 1: ";
    Node<K, V>* current1 = level1_head;
    if (current1 == nullptr) {
        cout << "ç©º" << endl;
    } else {
        while (current1 != nullptr) {
            cout << "[" << current1->key << ":" << current1->value << "]";
            if (current1->next != nullptr) {
                cout << " -> ";
            }
            current1 = current1->next;
        }
        cout << " -> NULL" << endl;
    }
    
    // æ˜¾ç¤º Level 0
    cout << "Level 0: ";
    Node<K, V>* current0 = level0_head;
    if (current0 == nullptr) {
        cout << "ç©º" << endl;
    } else {
        while (current0 != nullptr) {
            cout << "[" << current0->key << ":" << current0->value << "]";
            if (current0->next != nullptr) {
                cout << " -> ";
            }
            current0 = current0->next;
        }
        cout << " -> NULL" << endl;
    }
    
    cout << "æ€»å…ƒç´ æ•°: " << element_count << endl;
    cout << "===================================" << endl;
}
```

---

## 4. å®Œæ•´ä»£ç 

**æ–‡ä»¶å**ï¼š`stage2_two_level.cpp`

```cpp
#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

// èŠ‚ç‚¹ç±»
template<typename K, typename V>
class Node {
public:
    K key;
    V value;
    Node* next;    // åŒå±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
    Node* down;    // ä¸‹ä¸€å±‚çš„å¯¹åº”èŠ‚ç‚¹
    
    Node(K k, V v) : key(k), value(v), next(nullptr), down(nullptr) {}
};

// åŒå±‚è·³è¡¨ç±»
template<typename K, typename V>
class TwoLevelSkipList {
private:
    Node<K, V>* level1_head;  // ç¬¬1å±‚å¤´èŠ‚ç‚¹
    Node<K, V>* level0_head;  // ç¬¬0å±‚å¤´èŠ‚ç‚¹
    int element_count;
    
public:
    // æ„é€ å‡½æ•°
    TwoLevelSkipList() : level1_head(nullptr), level0_head(nullptr), element_count(0) {
        srand(time(nullptr));  // åˆå§‹åŒ–éšæœºæ•°ç§å­
        cout << "åŒå±‚è·³è¡¨å·²åˆ›å»º" << endl;
    }
    
    // ææ„å‡½æ•°
    ~TwoLevelSkipList() {
        // é‡Šæ”¾ Level 1
        Node<K, V>* current = level1_head;
        while (current != nullptr) {
            Node<K, V>* temp = current;
            current = current->next;
            delete temp;
        }
        
        // é‡Šæ”¾ Level 0
        current = level0_head;
        while (current != nullptr) {
            Node<K, V>* temp = current;
            current = current->next;
            delete temp;
        }
        
        cout << "åŒå±‚è·³è¡¨å·²é”€æ¯ï¼Œå†…å­˜å·²é‡Šæ”¾" << endl;
    }
    
    // æ’å…¥å…ƒç´ 
    void insert(K key, V value) {
        cout << "\n--- æ’å…¥ key=" << key << " ---" << endl;
        
        // æ­¥éª¤1ï¼šåœ¨ Level 0 æ’å…¥
        Node<K, V>* newNode0 = new Node<K, V>(key, value);
        
        if (level0_head == nullptr || level0_head->key >= key) {
            if (level0_head != nullptr && level0_head->key == key) {
                cout << "key=" << key << " å·²å­˜åœ¨" << endl;
                delete newNode0;
                return;
            }
            newNode0->next = level0_head;
            level0_head = newNode0;
        } else {
            Node<K, V>* current = level0_head;
            while (current->next != nullptr && current->next->key < key) {
                current = current->next;
            }
            
            if (current->next != nullptr && current->next->key == key) {
                cout << "key=" << key << " å·²å­˜åœ¨" << endl;
                delete newNode0;
                return;
            }
            
            newNode0->next = current->next;
            current->next = newNode0;
        }
        
        element_count++;
        cout << "âœ“ åœ¨ Level 0 æ’å…¥æˆåŠŸ" << endl;
        
        // æ­¥éª¤2ï¼šä»¥ 50% æ¦‚ç‡æå‡åˆ° Level 1
        if (rand() % 2 == 0) {
            cout << "â†’ æå‡åˆ° Level 1" << endl;
            Node<K, V>* newNode1 = new Node<K, V>(key, value);
            newNode1->down = newNode0;  // è¿æ¥åˆ°ä¸‹å±‚èŠ‚ç‚¹
            
            if (level1_head == nullptr || level1_head->key >= key) {
                newNode1->next = level1_head;
                level1_head = newNode1;
            } else {
                Node<K, V>* current = level1_head;
                while (current->next != nullptr && current->next->key < key) {
                    current = current->next;
                }
                newNode1->next = current->next;
                current->next = newNode1;
            }
        } else {
            cout << "â†’ ä¸æå‡åˆ° Level 1" << endl;
        }
    }
    
    // æŸ¥æ‰¾å…ƒç´ 
    bool search(K key) {
        cout << "\n--- æŸ¥æ‰¾ key=" << key << " ---" << endl;
        int comparisons = 0;
        
        // æ­¥éª¤1ï¼šä» Level 1 å¼€å§‹
        Node<K, V>* current = level1_head;
        
        if (current != nullptr) {
            cout << "ä» Level 1 å¼€å§‹æŸ¥æ‰¾..." << endl;
            
            // åœ¨ Level 1 å‘å³ç§»åŠ¨
            while (current != nullptr && current->key < key) {
                comparisons++;
                if (current->next == nullptr || current->next->key > key) {
                    // ä¸‹é™åˆ° Level 0
                    cout << "ä» Level 1 ä¸‹é™åˆ° Level 0ï¼Œä½ç½®åœ¨ key=" << current->key << " ä¹‹å" << endl;
                    current = current->down;
                    if (current != nullptr) {
                        current = current->next;
                    }
                    break;
                }
                current = current->next;
            }
            
            // æ£€æŸ¥æ˜¯å¦åœ¨ Level 1 å°±æ‰¾åˆ°äº†
            if (current != nullptr && current->key == key) {
                comparisons++;
                cout << "âœ“ åœ¨ Level 1 æ‰¾åˆ° key=" << key << ", value=" << current->value << endl;
                cout << "æ€»æ¯”è¾ƒæ¬¡æ•°: " << comparisons << endl;
                return true;
            }
        } else {
            // Level 1 ä¸ºç©ºï¼Œç›´æ¥ä» Level 0 å¼€å§‹
            cout << "Level 1 ä¸ºç©ºï¼Œä» Level 0 å¼€å§‹æŸ¥æ‰¾..." << endl;
            current = level0_head;
        }
        
        // æ­¥éª¤2ï¼šåœ¨ Level 0 æŸ¥æ‰¾
        while (current != nullptr) {
            comparisons++;
            if (current->key == key) {
                cout << "âœ“ åœ¨ Level 0 æ‰¾åˆ° key=" << key << ", value=" << current->value << endl;
                cout << "æ€»æ¯”è¾ƒæ¬¡æ•°: " << comparisons << endl;
                return true;
            }
            if (current->key > key) {
                break;
            }
            current = current->next;
        }
        
        cout << "âœ— æœªæ‰¾åˆ° key=" << key << endl;
        cout << "æ€»æ¯”è¾ƒæ¬¡æ•°: " << comparisons << endl;
        return false;
    }
    
    // æ˜¾ç¤ºè·³è¡¨
    void display() {
        cout << "\n========== åŒå±‚è·³è¡¨ç»“æ„ ==========" << endl;
        
        // æ˜¾ç¤º Level 1
        cout << "Level 1: ";
        Node<K, V>* current1 = level1_head;
        if (current1 == nullptr) {
            cout << "ç©º" << endl;
        } else {
            while (current1 != nullptr) {
                cout << "[" << current1->key << ":" << current1->value << "]";
                if (current1->next != nullptr) {
                    cout << " -> ";
                }
                current1 = current1->next;
            }
            cout << " -> NULL" << endl;
        }
        
        // æ˜¾ç¤º Level 0
        cout << "Level 0: ";
        Node<K, V>* current0 = level0_head;
        if (current0 == nullptr) {
            cout << "ç©º" << endl;
        } else {
            while (current0 != nullptr) {
                cout << "[" << current0->key << ":" << current0->value << "]";
                if (current0->next != nullptr) {
                    cout << " -> ";
                }
                current0 = current0->next;
            }
            cout << " -> NULL" << endl;
        }
        
        cout << "æ€»å…ƒç´ æ•°: " << element_count << endl;
        cout << "===================================" << endl;
    }
    
    // è·å–å¤§å°
    int size() {
        return element_count;
    }
};

// ä¸»å‡½æ•°ï¼šæ¼”ç¤ºç¨‹åº
int main() {
    cout << "========================================" << endl;
    cout << "  é˜¶æ®µ2ï¼šåŒå±‚è·³è¡¨å®ç°æ¼”ç¤º" << endl;
    cout << "========================================\n" << endl;
    
    TwoLevelSkipList<int, string> skipList;
    
    cout << "\nã€æµ‹è¯•1ï¼šæ’å…¥å…ƒç´ ã€‘" << endl;
    cout << "-------------------" << endl;
    skipList.insert(1, "ä¸€");
    skipList.insert(3, "ä¸‰");
    skipList.insert(5, "äº”");
    skipList.insert(7, "ä¸ƒ");
    skipList.insert(9, "ä¹");
    skipList.insert(2, "äºŒ");
    skipList.insert(4, "å››");
    skipList.insert(6, "å…­");
    skipList.insert(8, "å…«");
    
    skipList.display();
    
    cout << "\nã€æµ‹è¯•2ï¼šæŸ¥æ‰¾å…ƒç´ ã€‘" << endl;
    cout << "-------------------" << endl;
    skipList.search(7);  // åº”è¯¥æ‰¾åˆ°
    skipList.search(10); // åº”è¯¥æ‰¾ä¸åˆ°
    skipList.search(1);  // æµ‹è¯•å¤´èŠ‚ç‚¹
    skipList.search(9);  // æµ‹è¯•å°¾èŠ‚ç‚¹
    
    cout << "\nã€æµ‹è¯•3ï¼šå¯¹æ¯”æŸ¥æ‰¾æ•ˆç‡ã€‘" << endl;
    cout << "-------------------" << endl;
    cout << "æç¤ºï¼šè§‚å¯Ÿ'æ€»æ¯”è¾ƒæ¬¡æ•°'ï¼Œä½“ä¼šè·³è¡¨çš„åŠ é€Ÿæ•ˆæœï¼" << endl;
    cout << "å¦‚æœæ²¡æœ‰ Level 1ï¼ŒæŸ¥æ‰¾ key=9 éœ€è¦æ¯”è¾ƒ 9 æ¬¡" << endl;
    cout << "æœ‰äº† Level 1ï¼Œæ¯”è¾ƒæ¬¡æ•°ä¼šå‡å°‘ï¼" << endl;
    
    cout << "\n========================================" << endl;
    cout << "  æ¼”ç¤ºç»“æŸ" << endl;
    cout << "========================================" << endl;
    
    return 0;
}
```

---

## 5. ç¼–è¯‘å’Œè¿è¡Œ

### ç¼–è¯‘

```bash
cd /Users/cjx/Downloads/Skiplist-CPP-master/learning-plan
g++ -std=c++11 -o stage2 stage2_two_level.cpp
```

### è¿è¡Œ

```bash
./stage2
```

### é¢„æœŸè¾“å‡ºç¤ºä¾‹

```
========================================
  é˜¶æ®µ2ï¼šåŒå±‚è·³è¡¨å®ç°æ¼”ç¤º
========================================

åŒå±‚è·³è¡¨å·²åˆ›å»º

ã€æµ‹è¯•1ï¼šæ’å…¥å…ƒç´ ã€‘
-------------------

--- æ’å…¥ key=1 ---
âœ“ åœ¨ Level 0 æ’å…¥æˆåŠŸ
â†’ æå‡åˆ° Level 1

--- æ’å…¥ key=3 ---
âœ“ åœ¨ Level 0 æ’å…¥æˆåŠŸ
â†’ ä¸æå‡åˆ° Level 1

--- æ’å…¥ key=5 ---
âœ“ åœ¨ Level 0 æ’å…¥æˆåŠŸ
â†’ æå‡åˆ° Level 1

...

========== åŒå±‚è·³è¡¨ç»“æ„ ==========
Level 1: [1:ä¸€] -> [5:äº”] -> [9:ä¹] -> NULL
Level 0: [1:ä¸€] -> [2:äºŒ] -> [3:ä¸‰] -> [4:å››] -> [5:äº”] -> [6:å…­] -> [7:ä¸ƒ] -> [8:å…«] -> [9:ä¹] -> NULL
æ€»å…ƒç´ æ•°: 9
===================================

ã€æµ‹è¯•2ï¼šæŸ¥æ‰¾å…ƒç´ ã€‘
-------------------

--- æŸ¥æ‰¾ key=7 ---
ä» Level 1 å¼€å§‹æŸ¥æ‰¾...
ä» Level 1 ä¸‹é™åˆ° Level 0ï¼Œä½ç½®åœ¨ key=5 ä¹‹å
âœ“ åœ¨ Level 0 æ‰¾åˆ° key=7, value=ä¸ƒ
æ€»æ¯”è¾ƒæ¬¡æ•°: 3

--- æŸ¥æ‰¾ key=10 ---
ä» Level 1 å¼€å§‹æŸ¥æ‰¾...
ä» Level 1 ä¸‹é™åˆ° Level 0ï¼Œä½ç½®åœ¨ key=9 ä¹‹å
âœ— æœªæ‰¾åˆ° key=10
æ€»æ¯”è¾ƒæ¬¡æ•°: 4
```

---

## 6. æ€§èƒ½åˆ†æ

### æ—¶é—´å¤æ‚åº¦å¯¹æ¯”

| æ“ä½œ | å•å±‚é“¾è¡¨ | åŒå±‚è·³è¡¨ | æ”¹è¿› |
|------|---------|---------|------|
| æŸ¥æ‰¾ | O(n) | O(n/2) å¹³å‡ | å¿«çº¦ 2 å€ |
| æ’å…¥ | O(n) | O(n/2) å¹³å‡ | å¿«çº¦ 2 å€ |

### ä¸ºä»€ä¹ˆæ›´å¿«ï¼Ÿ

å‡è®¾æœ‰ 100 ä¸ªå…ƒç´ ï¼š
- **å•å±‚é“¾è¡¨**ï¼šæœ€åéœ€è¦æ¯”è¾ƒ 100 æ¬¡
- **åŒå±‚è·³è¡¨**ï¼šLevel 1 çº¦æœ‰ 50 ä¸ªèŠ‚ç‚¹ï¼Œæœ€åéœ€è¦æ¯”è¾ƒçº¦ 50 æ¬¡

**å…³é”®æ´å¯Ÿ**ï¼šå±‚æ•°è¶Šå¤šï¼Œè·³è·ƒè·ç¦»è¶Šå¤§ï¼ŒæŸ¥æ‰¾è¶Šå¿«ï¼

---

## 7. ç»ƒä¹ é¢˜

### ç»ƒä¹  1ï¼šç»Ÿè®¡æå‡ç‡
ä¿®æ”¹ä»£ç ï¼Œç»Ÿè®¡å®é™…æœ‰å¤šå°‘èŠ‚ç‚¹è¢«æå‡åˆ° Level 1ï¼Œè®¡ç®—æå‡ç‡ã€‚

### ç»ƒä¹  2ï¼šå¯è§†åŒ–è¿æ¥
åœ¨ `display()` æ–¹æ³•ä¸­ï¼Œç”¨ç«–çº¿ `|` æ˜¾ç¤º Level 1 å’Œ Level 0 ä¹‹é—´çš„ `down` è¿æ¥ã€‚

### ç»ƒä¹  3ï¼šåˆ é™¤æ“ä½œ
å®ç° `remove(K key)` æ–¹æ³•ï¼Œéœ€è¦åŒæ—¶åˆ é™¤ä¸¤å±‚çš„èŠ‚ç‚¹ã€‚

---

## 8. å¸¸è§é—®é¢˜

### Q1ï¼šä¸ºä»€ä¹ˆç”¨ 50% æ¦‚ç‡æå‡ï¼Ÿ
Aï¼šè¿™æ ·å¯ä»¥ä¿è¯ Level 1 çº¦æœ‰ä¸€åŠçš„èŠ‚ç‚¹ï¼Œè¾¾åˆ°æœ€ä½³çš„æŸ¥æ‰¾æ•ˆç‡ã€‚

### Q2ï¼šå¦‚æœæ‰€æœ‰èŠ‚ç‚¹éƒ½æå‡åˆ° Level 1 ä¼šæ€æ ·ï¼Ÿ
Aï¼šLevel 1 å’Œ Level 0 å®Œå…¨ä¸€æ ·ï¼Œå¤±å»äº†è·³è¡¨çš„æ„ä¹‰ã€‚

### Q3ï¼šå¦‚æœæ²¡æœ‰èŠ‚ç‚¹æå‡åˆ° Level 1 ä¼šæ€æ ·ï¼Ÿ
Aï¼šé€€åŒ–ä¸ºå•å±‚é“¾è¡¨ï¼ŒæŸ¥æ‰¾æ•ˆç‡é™ä½ã€‚

---

## 9. å…³é”®æ”¶è·

é€šè¿‡é˜¶æ®µ 2ï¼Œä½ åº”è¯¥ç†è§£äº†ï¼š
- âœ… è·³è¡¨çš„æ ¸å¿ƒæ€æƒ³ï¼šå¤šå±‚ç´¢å¼•
- âœ… å¦‚ä½•é€šè¿‡éšæœºæå‡æ„å»ºç´¢å¼•å±‚
- âœ… è·³è¡¨å¦‚ä½•åŠ é€ŸæŸ¥æ‰¾ï¼ˆå‡å°‘æ¯”è¾ƒæ¬¡æ•°ï¼‰
- âœ… `down` æŒ‡é’ˆçš„ä½œç”¨

---

## 10. ä¸‹ä¸€æ­¥

åœ¨é˜¶æ®µ 3 ä¸­ï¼Œæˆ‘ä»¬å°†ï¼š
- å®ç°çœŸæ­£çš„å¤šå±‚è·³è¡¨ï¼ˆä¸é™äº 2 å±‚ï¼‰
- å¼•å…¥åŠ¨æ€å±‚æ•°ç”Ÿæˆç®—æ³•
- å®ç°å®Œæ•´çš„åˆ é™¤æ“ä½œ
- è¾¾åˆ° O(log n) çš„æ—¶é—´å¤æ‚åº¦

ğŸ‘‰ ç»§ç»­å­¦ä¹ ï¼š`04-é˜¶æ®µ3-å¤šå±‚è·³è¡¨.md`

